


<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,inital-scale=1,user-scalable=no">
  <title>第六天 [ 綮地 ]</title>
  <!-- bootstrapcss文件 -->
 <!--  <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->
<!--   
<link rel="stylesheet" href="/css/zhl.css">

 -->
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/fork-awesome.min.css">
    
      <link rel="stylesheet" href="/css/zhl.css">
    
  
  
<meta name="generator" content="Hexo 5.2.0"></head>
<body>
<div class="container-fluid">
  <div class="row">
  <div id="wrap" class="col-md-12">
    <div id="header">
	<div id="header-left">
	<h1 id="header-title"> 
	<a href="/">
		綮地
	</a>
	</h1>
	
	</div>
	<div id="header-right">
		
		
		<a href="/"  title="home"><i class="fa fa-home ">home</i></a>
		
		<a target="_blank" rel="noopener" href="https://github.com/lizehongss/demo_show"  title="demo"><i class="fa fa-code ">demo</i></a>
		
		<a href="/about"  title="about"><i class="fa fa-user ">about</i></a>
		
		<a href="/"  title="music"><i class="fa fa-music ">music</i></a>
		
		
	</div>
</div>

  </div>
  </div>
  <div id="content" class="row">
    <div id="content-left" class="col-md-4">
      

	

	

	
	<div class="widget-wrap">
		<h3 class="widget-title fa fa-archive">归档</h3>
		<div class="widget">
			<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">18</span></li></ul>
		</div>
	</div>



    </div>
    <div id="content-right" class="col-md-8">
    
<article id="post">
	<div class="post-title">
  <h1>第六天</h1>
  	</div>
  <div class="page-meta">
  	<span class="fa-wrap">
  		<i class="fa fa-clock-o"></i>
  		<span class="date-meta">2020-11-19</span>
  	</span>
  	<span class="fa-wrap">
  		
  	</span>
  	<span class="fa-wrap">
  		
  	</span>
  </div>
  <div class="post-content">
  <blockquote>
<p>1.字段类型</p>
</blockquote>
<pre><code>数值类型：
int  整数
long 长整型
float    单精度
double   双精度
decimal  钱

字符串：
char 字节       定长0-255长度    jepsonxxxxxx其余位会自动补齐
varchar 字符串  变长0-65535字节  jepson

日期
date 日期 YYYY-MM-DD
time 时间 HH:MM:SS
datetime  年月日时分秒
timestamp 年月日时分秒</code></pre>
<blockquote>
<p>2.sql类型</p>
</blockquote>
<pre><code>ddl  数据定义语言  create  drop
dml  数据操作语言  select insert update delete 增删改查
dcl  数据控制语言  grant</code></pre>
<blockquote>
<p>3.建表规范</p>
</blockquote>
<pre><code>create table ruozedata.rz(
id int(11)  not null auto_increment,    //第一列必须是自增长id
name varchar(255),
age  int(3),

create_user varchar(255),
create_time timestamp not null default current_timestamp,    
update_user varchar(255),
update_time timestamp not null default current_timestamp on update current_timestamp,
primary key(id)  主键= 唯一约束 +not null非空约束
);

规范:
1.表名称  字段名称 不要写中文  尽量不要汉语拼音
2.统一风格:一个东西最好只存在一个名字
订单号：
  order
  orderno
  orderid

创建时间:
  ctime
  cretime
  createtime
  cre_time
  create_time
3.第一个字段必须是自增长字段 主键，且 无业务意义   架构设计默认规则
4.一张表只有一个主键 id，业务字段需要唯一的话，就使用唯一约束来保证。
5.后面四个字段  务必加上
6.业务字段  注释务必要加上  comment &#39;xxx&#39;</code></pre>
<blockquote>
<p>4.增删改查</p>
</blockquote>
<pre><code>insert into ruozedata.rz(name,age) values(&#39;ruoze&#39;,18);
update ruozedata.rz set age=38 where name=&#39;ruoze&#39;;
select * from ruozedata.rz;
delete from ruozedata.rz where id=1;</code></pre>
<blockquote>
<p>5.其他语法</p>
</blockquote>
<pre><code>drop table ruozedata.rz;

create table ruozedata.rz(
idint(11)  not null auto_increment, 
name varchar(255) comment &#39;姓名&#39;,
age int(3) comment &#39;年龄&#39;,
create_user varchar(255),
create_time timestamp not null default current_timestamp,
update_user varchar(255),
update_time timestamp not null default current_timestamp **on update  current_timestamp**, //奠定了数据仓库的建设的基础,抽取数据很方便 
primary key(id)
);

测试数据：
insert into ruozedata.rz(name,age) values(&#39;ruoze&#39;,18);
insert into ruozedata.rz(name,age) values(&#39;jepson&#39;,16);
update ruozedata.rz set age=38 where name=&#39;ruoze&#39;;
select * from ruozedata.rz;
delete from ruozedata.rz where id=1;
insert into ruozedata.rz(name,age,create_user,update_user ) values(&#39;ruoze&#39;,18,&#39;xingxing&#39;,&#39;xingxing&#39;);

insert into ruozedata.rz(name,age) values(&#39;jepson&#39;,16);
insert into ruozedata.rz(name,age) values(&#39;xingxing&#39;,14);
insert into ruozedata.rz(name,age) values(&#39;xiao17&#39;,12);
insert into ruozedata.rz(name,age) values(&#39;jepson&#39;,22);
insert into ruozedata.rz(name,age) values(&#39;jfpson&#39;,22);

--1.过滤 where
select * from ruozedata.rz  where name=&#39;ruoze&#39;;
select * from ruozedata.rz  where name=&#39;jepson&#39; and age=22;

select * from ruozedata.rz  where age=16 or age=12;
select * from ruozedata.rz  where age in (16,12);
select * from ruozedata.rz a where exists (
select b.id from ruozedata.rz b 
where (age=16 or age=12 ) and a.id=b.id 
);

select * from ruozedata.rz  where age &gt;12;


-2.排序语法 order by

select * from ruozedata.rz order by age;
select * from ruozedata.rz order by age asc;
select * from ruozedata.rz order by age desc , name desc ;

--3.模糊匹配 like
select * from ruozedata.rz where name like &#39;j%&#39;;  字母j开头
select * from ruozedata.rz where name like &#39;%n&#39;;  字母n开头
select * from ruozedata.rz where name like &#39;%o%&#39;;  含有o
select * from ruozedata.rz where name like &#39;__p%&#39;; 第三位p 
_ 占位符

--4.合并表
create table t1(id int,name varchar(255));
create table t2(id int,name varchar(255));

insert into t1 values(1,&#39;ruoze&#39;);
insert into t2 values(1,&#39;ruoze&#39;);
insert into t2 values(2,&#39;jepson&#39;);

过滤重复
select * from t1
union 
select * from t2;

不过滤重复
select * from t1
union all
select * from t2;</code></pre>
<blockquote>
<p>5.分组语法 group by ….having ….</p>
</blockquote>
<pre><code>分组/聚合函数
sum 
avg
max
min
count

不带分组字段的
select 
sum(age),avg(age),max(age),min(age),count(*)
from ruozedata.rz ;

分组字段的
select 
name,
sum(age),count(1)
from ruozedata.rz 
group by name
having sum(age)&gt;18;

==&gt; 等价于 子查询进行筛选
select * from 
(
    select 
    name,
    sum(age) as sum_age,count(1) as c
    from ruozedata.rz 
    group by name
) as t where t.sum_age&gt;18;</code></pre>
<blockquote>
<p>作业：<br>1.datetime、timestamp什么区别 ？</p>
</blockquote>
<pre><code>一个完整的日期格式如下：YYYY-MM-DD HH:MM:SS[.fraction]，它可分为两部分：date部分和time部分，其中，date部分对应格式中的“YYYY-MM-DD”，time部分对应格式中的“HH:MM:SS[.fraction]”。对于date字段来说，它只支持date部分，如果插入了time部分的内容，它会丢弃掉该部分的内容，并提示一个warning。

timestamp和datetime的相同点：

（1） 两者都可用来表示YYYY-MM-DD HH:MM:SS[.fraction]类型的日期。

timestamp和datetime的不同点：

（1）两者的存储方式不一样

对于TIMESTAMP，它把客户端插入的时间从当前时区转化为UTC（世界标准时间）进行存储。查询时，将其又转化为客户端当前时区进行返回。

而对于DATETIME，不做任何改变，基本上是原样输入和输出。

（2）两者所能存储的时间范围不一样

timestamp所能存储的时间范围为：&#39;1970-01-01 00:00:01.000000&#39; 到 &#39;2038-01-19 03:14:07.999999&#39;。

datetime所能存储的时间范围为：&#39;1000-01-01 00:00:00.000000&#39; 到 &#39;9999-12-31 23:59:59.999999&#39;。</code></pre>
<blockquote>
<p> 2.exists  in 有什么区别 生产上如何选择</p>
</blockquote>
<pre><code>当主表比从表大时，IN查询效率较高
当从表比主表大时，exists查询效率较高
因为：in是先执行子查询，得到一个结果集，将结果集带入外层执行主查询，子查询只需要执行一次；
exists是先从主查询中取得一个记录再到子查询中，根据条件执行一次子查询，主查询有多少条数据，子查询就要执行多少次。</code></pre>

	</div>
</article>



    </div>
  </div>
  <div class="row">
<div id="bottom" class="col-md-12"> 
  <div class="bottom-nav">
	
	
	<a href="https://github.com/lizehongss" class="fa fa-github fa-2x" target="_blank" title="Follow me" ></a>
	
	
</div>
<div class="bottom-info">
	&copy; 2021 李鹏超<br>
	Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
	theme <a href="https://github.com/lizehongss/hexo-theme-zhl" target="_blank">zhl</a>
</div>
</div>
</div>
</div>
<div id="tool">
  <ul>
    <li class="fa fa-angle-up top" id="top"></li>
  </ul>
</div>
  <div class="bg_content">
    <canvas id="canvas"></canvas>
  </div>
  
  <!-- scripts list from theme config.yml -->
  
    <script src="/js/zhl.js"></script>
  
    <script src="/js/bj.js"></script>
  

<!-- jQ cdn  -->
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<!-- bootstrap js cdn-->
<!-- <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> -->


</body>
</html>
